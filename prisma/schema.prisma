generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model beneficiarios_finales {
  id                 Int         @id @default(autoincrement())
  nombre_completo    String
  rut_identificacion String
  participacion      String
  declaracion_id     Int
  declaracion        declaracion @relation(fields: [declaracion_id], references: [id])
}

model control_efectivo {
  id                 Int         @id @default(autoincrement())
  nombre_completo    String
  rut_identificacion String
  participacion      String
  declaracion_id     Int
  declaracion        declaracion @relation(fields: [declaracion_id], references: [id])
}

model declaracion {
  id                      Int                     @id @default(autoincrement())
  folio                   String
  fecha_declaracion       DateTime
  fecha_carga_declaracion DateTime
  is_active               Boolean                 @default(true)
  persona_juridica_id     Int
  beneficiarios_finales   beneficiarios_finales[]
  control_efectivo        control_efectivo[]
  persona_juridica        persona_juridica        @relation(fields: [persona_juridica_id], references: [id])
}

model empleado {
  id                  Int              @id @default(autoincrement())
  rut                 String
  nombre              String
  correo              String
  password            String
  telefono            String
  persona_juridica_id Int
  persona_juridica    persona_juridica @relation(fields: [persona_juridica_id], references: [id])
}

model persona_juridica {
  id                  Int                   @id @default(autoincrement())
  rut                 String
  nombre              String
  domicilio           String
  comuna              String
  ciudad              String
  constitucion        String
  telefono            String
  tipo_sociedad       String
  declaraciones       declaracion[]
  empleados           empleado[]
  representante_legal representante_legal[]
}

model representante_legal {
  id                  Int              @id @default(autoincrement())
  rut                 String
  nombre              String
  telefono            String
  correo              String
  persona_juridica_id Int
  persona_juridica    persona_juridica @relation(fields: [persona_juridica_id], references: [id])
}
